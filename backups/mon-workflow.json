{
  "": "",
  "active": false,
  "connections": {
    "Append or update row in sheet": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Analyze video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analyze video": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Structured Output Parser",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Append or update row in sheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append or update row in sheet1": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Think": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet in Google Sheets": {
      "ai_tool": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet in Google Sheets1": {
      "ai_tool": [
        [
          {
            "node": "Idea Generator",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Think1": {
      "ai_tool": [
        [
          {
            "node": "Idea Generator",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "Idea Generator",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Idea Generator": {
      "main": [
        [
          {
            "node": "Message a model",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create a document": {
      "main": [
        [
          {
            "node": "Update a document",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message a model": {
      "main": [
        [
          {
            "node": "Create a document",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items1": {
      "main": [
        [],
        [
          {
            "node": "Transcribes Videos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append or update row in sheet2": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Hashtag": {
      "main": [
        [
          {
            "node": "Run Scraper",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Results from Scraper": {
      "main": [
        [
          {
            "node": "Is Views over 100k",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Is Views over 100k": {
      "main": [
        [
          {
            "node": "Append or update row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transcribes Videos": {
      "main": [
        [
          {
            "node": "Append or update row in sheet2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Anthropic": {
      "ai_languageModel": [
        [
          {
            "node": "Idea Generator",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Structured Output Parser1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "GPT": {
      "ai_languageModel": [
        [
          {
            "node": "Idea Generator",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    }
  },
  "createdAt": "2025-12-29T01:41:09.297Z",
  "id": "DRB9sl8QKYXQlqwN",
  "isArchived": false,
  "meta": null,
  "name": "ShortForm Beast Mode (Inspirations Tik tok)",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -912,
        576
      ],
      "id": "bced24c9-1d71-48ec-b7ea-9456d31f8696",
      "name": "When clicking ‘Execute workflow’"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1-Q5uwU5R_QoYVaq9fU1mYYdP1cOpK918aZzv93AwTwU",
          "mode": "list",
          "cachedResultName": "Copy of ShortForm Beast Mode",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1-Q5uwU5R_QoYVaq9fU1mYYdP1cOpK918aZzv93AwTwU/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/19l-shnUR6gBxdYxNgZ8ZG9veQ8Pnv-9oy30gNRJ7ggY/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Video URL": "={{ $json.webVideoUrl }}",
            "Post Date": "={{ $json.createTimeISO }}",
            "Video Length": "={{ $json.videoMeta.duration }}",
            "Views": "={{ $json.playCount }}",
            "Likes": "={{ $json.diggCount }}",
            "Comments": "={{ $json.commentCount }}",
            "Shares": "={{ $json.shareCount }}",
            "Hashtags": "={{ $json.hashtags.map(h => h.name).join(\", \") }}",
            "CTA": "={{ $json.authorMeta.bioLink }}",
            "Music": "={{ $json.musicMeta.musicName }}",
            "Engagement Rate": "=",
            "Media Url": "={{ $json.mediaUrls.join(\", \") }}"
          },
          "matchingColumns": [
            "Video URL"
          ],
          "schema": [
            {
              "id": "Video URL",
              "displayName": "Video URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Media Url",
              "displayName": "Media Url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Post Date",
              "displayName": "Post Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Video Length",
              "displayName": "Video Length",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Views",
              "displayName": "Views",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Likes",
              "displayName": "Likes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Comments",
              "displayName": "Comments",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Shares",
              "displayName": "Shares",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Engagement Rate",
              "displayName": "Engagement Rate",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Hook",
              "displayName": "Hook",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Main Theme",
              "displayName": "Main Theme",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Format",
              "displayName": "Format",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Music",
              "displayName": "Music",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Hashtags",
              "displayName": "Hashtags",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "CTA",
              "displayName": "CTA",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -272,
        576
      ],
      "id": "e782dd41-889e-4d21-8c33-6b85af6a14aa",
      "name": "Append or update row in sheet"
    },
    {
      "parameters": {
        "batchSize": 3,
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        0,
        576
      ],
      "id": "119a87a3-c3f8-498a-a533-d42acaf1fba4",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "resource": "video",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.5-flash-lite",
          "mode": "list",
          "cachedResultName": "models/gemini-2.5-flash-lite"
        },
        "text": "You are an expert content analyst specializing in short-form videos.  \nAnalyze the following video and extract ONLY these three elements:  \n\n1. **Hook** – Write exactly what happens or is said in the first 3–5 seconds that captures attention. If they talk extract the words.  \n2. **Main Theme** – Summarize the central idea, topic, or message of the video.  \n3. **Format** – Identify the style of the video (e.g., tutorial, storytelling, POV, reaction, meme, trend-based, skit, voiceover with clips, etc.).  \n\nProvide the output in **JSON format** like this:\n{\n  \"hook\": \"...\",\n  \"main_theme\": \"...\",\n  \"format\": \"...\"\n}\n\nIf the video doesn’t clearly show one of these, infer the closest reasonable answer.",
        "videoUrls": "={{ $json[\"Media Url\"] }}",
        "options": {
          "maxOutputTokens": 512
        }
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        0,
        0
      ],
      "id": "f7ddd201-96b1-499e-874f-c8d72753b61c",
      "name": "Analyze video",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=turn the text provided into proper json format\n\n{{ $json.content.parts[0].text }}\n\n\nalso figure out the engagment rate using:\n\nviews: {{ $('Loop Over Items').item.json.Views }}\nshares: {{ $('Loop Over Items').item.json.Shares }}\n\noutput engatment rate as a precent make sure the precent has max 2 decimals points for example 0.23\n\nmake sure to always give an output if you cannot find information put \"null\"",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        176,
        0
      ],
      "id": "de61ac1a-1163-48c8-9e2f-2480becf64fb",
      "name": "AI Agent",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        0,
        224
      ],
      "id": "011d65be-9ea4-4d33-a965-918bf9330b37",
      "name": "OpenRouter Chat Model"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n\t\"hook\": \"\",\n\t\"main_theme\": \"\",\n    \"format\": \"\",\n    \"engagment_rate\" : 1.2\n}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        128,
        208
      ],
      "id": "b30e0d65-dc1b-483a-a352-7a415a6e48fc",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1-Q5uwU5R_QoYVaq9fU1mYYdP1cOpK918aZzv93AwTwU",
          "mode": "list",
          "cachedResultName": "Copy of ShortForm Beast Mode",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1-Q5uwU5R_QoYVaq9fU1mYYdP1cOpK918aZzv93AwTwU/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/19l-shnUR6gBxdYxNgZ8ZG9veQ8Pnv-9oy30gNRJ7ggY/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Video URL": "={{ $('Loop Over Items').item.json[\"Video URL\"] }}",
            "Media Url": "={{ $('Loop Over Items').item.json[\"Media Url\"] }}",
            "Post Date": "={{ $('Loop Over Items').item.json[\"Post Date\"] }}",
            "Video Length": "={{ $('Loop Over Items').item.json[\"Video Length\"] }}",
            "Views": "={{ $('Loop Over Items').item.json.Views }}",
            "Likes": "={{ $('Loop Over Items').item.json.Likes }}",
            "Comments": "={{ $('Loop Over Items').item.json.Comments }}",
            "Shares": "={{ $('Loop Over Items').item.json.Shares }}",
            "Hashtags": "={{ $('Loop Over Items').item.json.Hashtags }}",
            "CTA": "={{ $('Loop Over Items').item.json.CTA }}",
            "Music": "={{ $('Loop Over Items').item.json.Music }}",
            "Hook": "={{ $json.output.hook }}",
            "Engagement Rate": "=%{{ $json.output.engagment_rate }}",
            "Main Theme": "={{ $json.output.main_theme }}",
            "Format": "={{ $json.output.format }}"
          },
          "matchingColumns": [
            "Video URL"
          ],
          "schema": [
            {
              "id": "Video URL",
              "displayName": "Video URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Media Url",
              "displayName": "Media Url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Post Date",
              "displayName": "Post Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Video Length",
              "displayName": "Video Length",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Views",
              "displayName": "Views",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Likes",
              "displayName": "Likes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Comments",
              "displayName": "Comments",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Shares",
              "displayName": "Shares",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Engagement Rate",
              "displayName": "Engagement Rate",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Hook",
              "displayName": "Hook",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Main Theme",
              "displayName": "Main Theme",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Format",
              "displayName": "Format",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Music",
              "displayName": "Music",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Hashtags",
              "displayName": "Hashtags",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "CTA",
              "displayName": "CTA",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        0,
        368
      ],
      "id": "07f9f0f3-f9c5-4b6f-8e32-e15f7419efd7",
      "name": "Append or update row in sheet1"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "typeVersion": 1.1,
      "position": [
        400,
        192
      ],
      "id": "987fa61c-30ed-4608-a3f0-c508482dd13e",
      "name": "Think"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        944,
        128
      ],
      "id": "ead831fc-6175-4577-a467-42db8d7f5012",
      "name": "AI Agent1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        608,
        128
      ],
      "id": "f59fd1f7-5c3d-44b3-bd4e-4342af272bfe",
      "name": "When chat message received",
      "webhookId": "cfe268a6-6ace-456c-af9a-8b1c5bab197d"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        832,
        320
      ],
      "id": "2c3b6d3e-fb86-455d-a094-0c0928cc1953",
      "name": "OpenRouter Chat Model1"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        992,
        336
      ],
      "id": "0ba7cde7-8867-4bec-9217-5bbf25cb4492",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1-Q5uwU5R_QoYVaq9fU1mYYdP1cOpK918aZzv93AwTwU",
          "mode": "list",
          "cachedResultName": "Copy of ShortForm Beast Mode",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1-Q5uwU5R_QoYVaq9fU1mYYdP1cOpK918aZzv93AwTwU/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "dropshipping",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1-Q5uwU5R_QoYVaq9fU1mYYdP1cOpK918aZzv93AwTwU/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.7,
      "position": [
        1152,
        320
      ],
      "id": "3f802f84-6df8-4ea9-afa1-9c561df58fa5",
      "name": "Get row(s) in sheet in Google Sheets"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1-Q5uwU5R_QoYVaq9fU1mYYdP1cOpK918aZzv93AwTwU",
          "mode": "list",
          "cachedResultName": "Copy of ShortForm Beast Mode",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1-Q5uwU5R_QoYVaq9fU1mYYdP1cOpK918aZzv93AwTwU/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "dropshipping",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1-Q5uwU5R_QoYVaq9fU1mYYdP1cOpK918aZzv93AwTwU/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.7,
      "position": [
        848,
        928
      ],
      "id": "d358ac3c-cf7c-424f-ac27-57c8490ce73f",
      "name": "Get row(s) in sheet in Google Sheets1"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "typeVersion": 1.1,
      "position": [
        720,
        848
      ],
      "id": "ef9a29a8-681b-4c6d-a7e0-d96cedb2e705",
      "name": "Think1"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"ideas\": [\n    {\n      \"hook\": \"string, 1–2 sentences\",\n      \"script\": \"string, 15–30 seconds spoken\",\n      \"songs\": [\n        {\n          \"title\": \"string\",\n          \"artist\": \"string\"\n        }\n      ],\n      \"hashtags\": [\n        \"string1\",\n        \"string2\"\n      ]\n    }\n  ]\n}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        880,
        736
      ],
      "id": "dd0a1d3a-6fbc-4fdf-b6ac-90c98a0fd70e",
      "name": "Structured Output Parser1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "Using the data from the provided sheet about viral content trends, please create 5 unique talking head video ideas. Each idea should include:\n\nA strong, attention-grabbing viral-style hook similar to those in the sheet data.\nA concise script that lasts between 15 to 30 seconds when spoken.\nActual song recommendations of popular or trending TikTok sounds or music that suit the mood and message of the video. Suggest specific song titles and artists.\nRelevant hashtags to enhance virality and reach.\nThe video ideas should be simple to film and focus on content consistent with the sheet's content trends.\nUse the transcripts in the sheet to get an idea of what a viral script looks like and use it to create the script.\n\nPlease format the output clearly, listing each video idea with the hook, full script, song recommendation, and hashtags.\"\n\nOUTPUT RULES:\n- Return a single JSON object only. No prose, no markdown, no code fences.\n- Schema:\n  {\n    \"ideas\": [\n      {\n        \"hook\": \"string, 1–2 sentences\",\n        \"script\": \"string, 15–30 seconds spoken\",\n        \"songs\": [{\"title\":\"string\",\"artist\":\"string\"}],\n        \"hashtags\": [\"string\", \"string\", ...]\n      }\n    ]\n  }",
        "hasOutputParser": true,
        "needsFallback": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        640,
        544
      ],
      "id": "e62f9f3e-7db3-4d76-92ac-0c8d17940723",
      "name": "Idea Generator"
    },
    {
      "parameters": {
        "folderId": "default",
        "title": "VideosIdea"
      },
      "type": "n8n-nodes-base.googleDocs",
      "typeVersion": 2,
      "position": [
        1440,
        544
      ],
      "id": "bb439e79-bf3c-4826-aa99-e29c463331b4",
      "name": "Create a document"
    },
    {
      "parameters": {
        "operation": "update",
        "documentURL": "={{ $json.id }}",
        "actionsUi": {
          "actionFields": [
            {
              "action": "insert",
              "text": "={{ $('Message a model').item.json.message.content.output }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.googleDocs",
      "typeVersion": 2,
      "position": [
        1696,
        544
      ],
      "id": "2d92ffcc-28f2-495e-a821-1f8149630fd3",
      "name": "Update a document"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "={{ JSON.stringify($json.output) }}"
            },
            {
              "content": "out put this data under one variable:\n\n{\"output\": \"\"}\n\nmake sure its proper json\n\nalso turn the data into text that i will send to google docs so make sure the formatting is good",
              "role": "system"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1040,
        544
      ],
      "id": "221aab79-75df-485d-80f0-74b2f0e3d99f",
      "name": "Message a model"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        256,
        560
      ],
      "id": "2011a146-c4ae-456e-8a66-41b6c38c2c9d",
      "name": "Loop Over Items1"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1-Q5uwU5R_QoYVaq9fU1mYYdP1cOpK918aZzv93AwTwU",
          "mode": "list",
          "cachedResultName": "Copy of ShortForm Beast Mode",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1-Q5uwU5R_QoYVaq9fU1mYYdP1cOpK918aZzv93AwTwU/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "selfimprovement",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/19l-shnUR6gBxdYxNgZ8ZG9veQ8Pnv-9oy30gNRJ7ggY/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Video URL": "={{ $('Loop Over Items1').item.json[\"Video URL\"] }}",
            "Media Url": "={{ $('Loop Over Items1').item.json[\"Media Url\"] }}",
            "Post Date": "={{ $('Loop Over Items1').item.json[\"Post Date\"] }}",
            "Video Length": "={{ $('Loop Over Items1').item.json[\"Video Length\"] }}",
            "Views": "={{ $('Loop Over Items1').item.json.Views }}",
            "Likes": "={{ $('Loop Over Items1').item.json.Likes }}",
            "Comments": "={{ $('Loop Over Items1').item.json.Comments }}",
            "Shares": "={{ $('Loop Over Items1').item.json.Shares }}",
            "Engagement Rate": "={{ $('Loop Over Items1').item.json[\"Engagement Rate\"] }}",
            "Hook": "={{ $('Loop Over Items1').item.json.Hook }}",
            "Main Theme": "={{ $('Loop Over Items1').item.json[\"Main Theme\"] }}",
            "Format": "={{ $('Loop Over Items1').item.json.Format }}",
            "Music": "={{ $('Loop Over Items1').item.json.Music }}",
            "Hashtags": "={{ $('Loop Over Items1').item.json.Hashtags }}",
            "CTA": "={{ $('Loop Over Items1').item.json.CTA }}",
            "Transcript": "={{ $json.transcript }}"
          },
          "matchingColumns": [
            "Video URL"
          ],
          "schema": [
            {
              "id": "Video URL",
              "displayName": "Video URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Media Url",
              "displayName": "Media Url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Post Date",
              "displayName": "Post Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Video Length",
              "displayName": "Video Length",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Views",
              "displayName": "Views",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Likes",
              "displayName": "Likes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Comments",
              "displayName": "Comments",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Shares",
              "displayName": "Shares",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Engagement Rate",
              "displayName": "Engagement Rate",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Hook",
              "displayName": "Hook",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Main Theme",
              "displayName": "Main Theme",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Format",
              "displayName": "Format",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Music",
              "displayName": "Music",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Hashtags",
              "displayName": "Hashtags",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "CTA",
              "displayName": "CTA",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Transcript",
              "displayName": "Transcript",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        256,
        704
      ],
      "id": "cee509fe-7937-450f-bede-cad5234ac7d5",
      "name": "Append or update row in sheet2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "f95baad4-a887-425e-9892-393ca9e828d2",
              "name": "hashtag",
              "value": "mechanic",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -704,
        304
      ],
      "id": "e97abbac-b220-45ce-9a5e-a004c0828f18",
      "name": "Set Hashtag"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.apify.com/v2/acts/clockworks~tiktok-hashtag-scraper/runs",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"hashtags\": [\n        \"{{ $json.hashtag }}\"\n    ],\n    \"resultsPerPage\": 200,\n    \"shouldDownloadCovers\": true,\n    \"shouldDownloadSlideshowImages\": true,\n    \"shouldDownloadSubtitles\": true,\n    \"shouldDownloadVideos\": true\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -400,
        304
      ],
      "id": "a5298e1d-b9c9-421d-826f-b51172186d1c",
      "name": "Run Scraper"
    },
    {
      "parameters": {
        "url": "https://api.apify.com/v2/acts/clockworks~tiktok-hashtag-scraper/runs/last/dataset/items",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -704,
        576
      ],
      "id": "318ef59c-dae9-422b-bada-548213aef79a",
      "name": "Get Results from Scraper"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "536f24ff-b3ba-438a-a19f-fbc9f33a6b08",
              "leftValue": "={{ $json.playCount }}",
              "rightValue": 100000,
              "operator": {
                "type": "number",
                "operation": "gt"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -496,
        576
      ],
      "id": "67fc95a1-4b87-439c-b5b5-e1eb7cbb0a9d",
      "name": "Is Views over 100k"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.apify.com/v2/acts/tictechid~anoxvanzi-transcriber/run-sync-get-dataset-items",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"start_urls\": \"{{ $json[\"Video URL\"] }}\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        256,
        864
      ],
      "id": "28a160df-f35a-49d2-9c9c-ed49e45a1dc8",
      "name": "Transcribes Videos"
    },
    {
      "parameters": {
        "model": "anthropic/claude-3.5-sonnet",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        496,
        800
      ],
      "id": "cd5791e2-912e-4bf7-bafa-4bffbb050ae9",
      "name": "Anthropic"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        608,
        896
      ],
      "id": "421a3b6f-cd3c-4b0c-b98f-dab5d56454bb",
      "name": "GPT"
    }
  ],
  "pinData": {},
  "repo_name": "n8n-workflows-nov-25",
  "repo_owner": "Adam-s-tech",
  "repo_path": "backups/",
  "settings": {
    "executionOrder": "v1"
  },
  "shared": [
    {
      "updatedAt": "2025-12-29T01:41:09.299Z",
      "createdAt": "2025-12-29T01:41:09.299Z",
      "role": "workflow:owner",
      "workflowId": "DRB9sl8QKYXQlqwN",
      "projectId": "oXQkWGdjmWkcvoUC"
    }
  ],
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-12-29T01:49:23.000Z",
  "versionId": "7af9b4fb-1a94-49ff-87cd-7900be3a324b"
}